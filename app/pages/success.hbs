<h1>Success</h1>

<canvas id="foo" width="20px" height="20px"></canvas>
<button id="save">Save Image</button>
<script>
    var ctx = $('#foo')[0].getContext('2d');
    for (var x = 0; x < 20; x += 10) {
        for (var y = 0; y < 20; y += 10) {
            if (x == y) { ctx.fillStyle = '#000000'; }
            else { ctx.fillStyle = '#8888aa'; }
            ctx.fillRect(x, y, 10, 10);
        }
    }
    console.log($('#foo')[0].toDataURL());

    window.onload = function () {
        $('#save').on('click', function () {
            $.post('/image', {
            	image: $('#foo')[0].toDataURL()
            })
        })
    }
</script>